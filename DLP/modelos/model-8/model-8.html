<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      href="https://fonts.googleapis.com/css2?family=Oswald&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../../../css/styles.css" />
    <link rel="stylesheet" href="../../../css/style-sidebar.css" />
    <link rel="stylesheet" href="../../../css/art-styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.7.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@magenta/image@0.2.1/dist/magentaimage.min.js"></script>
    <title>Style Transfer</title>
  </head>
  <body>
    <!-- THE HEADER - SECOND HEADER-->
    <div id="the-header">
      <header>
        <div class="second-header">
          <h1><a href="../../../index.html"> Plataforma JS </a></h1>
        </div>
      </header>
    </div>

    <!-- NAV -  BARRA NAVEGACION-->
    <div id="the-nav">
      <nav>
        <ul id="menu">
          <li><a href="../../../index.html">Home</a></li>
          <li class="dropdown">
            <a href="#" class="dropbtn">Let's play!</a>
            <div class="dropdown-content">
              <a href="../../model.html">Modelos</a>
              <a href="https://playground.tensorflow.org/" target="_blank"
                >Tensorflow Playground</a
              >
              <a href="https://poloclub.github.io/ganlab/" target="_blank"
                >GAN Lab</a
              >
            </div>
          </li>
          <li class="dropdown">
            <a href="#" class="dropbtn">Doc's TensorFlow.js</a>
            <div class="dropdown-content">
              <a href="https://js.tensorflow.org/api/latest/" target="_blank"
                >Referencia API</a
              >
              <a
                href="https://github.com/tensorflow/tfjs-models"
                target="_blank"
                >Modelos tfjs</a
              >
              <a
                href="https://github.com/tensorflow/tfjs-examples/"
                target="_blank"
                >Más ejemplos tfjs</a
              >
              <a
                href="https://blog.tensorflow.org/search?label=TensorFlow.js&max-results=10"
                target="_blank"
                >Blog TensorFlow.js</a
              >
            </div>
          </li>

          <li class="dropdown">
            <a href="#" class="dropbtn">About</a>
            <div class="dropdown-content">
              <a href="../../about/how-works.html">¿Cómo se trabaja en tfjs?</a>
              <a href="../../about/recursos.html">Otros recursos</a>
            </div>
          </li>
          <li>
            <a style="cursor: pointer" onclick="openNav()">&#9776; Ejemplos</a>
          </li>
        </ul>
      </nav>
    </div>

    <h2>Style Transfer</h2>

    <img id="contentImg" src="avengers.png" />
    <img id="styleImg" src="kadinsky.jpg" />

    <button class="btn btn-transfer">
      <i class="fas fa-random"></i>
      <span>Click to transfer</span>
    </button>

    <canvas id="stylized"></canvas>

    <script>
      const model = new mi.ArbitraryStyleTransferNetwork();
      const canvas = document.getElementById("stylized");
      const ctx = canvas.getContext("2d");
      const contentImg = document.getElementById("contentImg");
      const styleImg = document.getElementById("styleImg");

      const BtnTransfer = document.querySelector(".btn-transfer");
      BtnTransfer.addEventListener("click", function (event) {
        model.initialize().then(() => {
          stylize();
        });
      });

      async function stylize() {
        //await clearCanvas();

        // Resize the canvas to be the same size as the source image.
        canvas.width = contentImg.width;
        canvas.height = contentImg.height;

        // This does all the work!
        model.stylize(contentImg, styleImg).then((imageData) => {
          ctx.putImageData(imageData, 0, 0);
        });
      }
    </script>

        <!-- SIDENAV -->
        <nav id="mySidenav" class="sidenav"></nav>
        <!-- FIN SideNav-->

    <!-- FOOTER -  PIE DE PAGINA-->
    <div id="the-footer">
      <footer>
        <p>Legal disclaimer, copyright, etc.</p>
        <ul>
          <li>
            <a href="#"
              ><img src="../../../img/icon1.png" alt="Social Media 1."
            /></a>
          </li>
          <li>
            <a href="#"
              ><img src="../../../img/icon2.png" alt="Social Media 2."
            /></a>
          </li>
        </ul>
      </footer>
    </div>
    <script src="../ui-sidebar.js"></script>
  </body>
</html>

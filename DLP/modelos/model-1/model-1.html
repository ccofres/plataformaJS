<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Modelo 1</title>
    <!--
    <script src="../../codemirror/lib/codemirror.js"></script>
    <link rel="stylesheet" href="../../codemirror/lib/codemirror.css" />
    <script src="../../codemirror/mode/javascript/javascript.js"></script>
    <script src="../../codemirror/addon/edit/matchbrackets.js"></script>
    -->
    <link
      href="https://fonts.googleapis.com/css2?family=Oswald&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../../code-editor/codemirror-5-50-2.css">
    <link rel="stylesheet" href="../../code-editor/editor-js.css">
    <link rel="stylesheet" href="../../../css/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.7.0/dist/tf.min.js"></script>
  </head>
  <body>
    <!--Nav top -->
    <nav class="flex-nav-top">
      <ul>
      <li><a href="../../../index.html">Home</a></li>
      <li><a href="../../dlp.html">DLP - Playground</a></li>
      <li><a href="../model.html">Modelos</a></li>
      <li>
        <a href="https://playground.tensorflow.org/" target="_blank">TensorFlow Playground</a>
      </li>
      <li><a href="https://poloclub.github.io/ganlab/" target="_blank">GAN Lab</a></li>
    </ul>
    </nav>
    <!-- FIN Nav top-->
    <!-- Nav left -->
    <nav class="flex-nav-left">
      <button class="btn-left"><a href="./model-1.html">Model 1</a></button>
      <button class="btn-left">
        <a href="../model-2/model-2.html">Model 2</a>
      </button>
      <button class="btn-left"><a href="../model-3/model-3.html">Clasificador Iris</a></button>
      <button class="btn-left"><a href="../model-4/model-4.html">Multiclasificador BCWD</a></button>
      <button class="btn-left"><a href="../model-5/model-5.html">Clasificador MNIST</a></button>
      <button class="btn-left"><a href="../model-6/model-6.html">Clasificador Fashion MNIST</a></button>
      <button class="btn-left"><a href="../model-7/model-7.html">Transfer Learning con MobileNet</a></button>
      <button class="btn-left"><a href="../model-8/model-8.html">Style Transfer con Magenta.js</a></button>

    </nav>
    <!-- FIN Nav left-->
    <h2>Code Editor</h2>
    <!--CodeMirror Editor-->

    <section id="static">
      <pre><code id="static-js" data-height="">
        const trainData = {
          sizeMB:  [0.080, 9.000, 0.001, 0.100, 8.000, 5.000, 0.100, 6.000, 0.050, 0.500,
                    0.002, 2.000, 0.005, 10.00, 0.010, 7.000, 6.000, 5.000, 1.000, 1.000],
          timeSec: [0.135, 0.739, 0.067, 0.126, 0.646, 0.435, 0.069, 0.497, 0.068, 0.116,
                    0.070, 0.289, 0.076, 0.744, 0.083, 0.560, 0.480, 0.399, 0.153, 0.149]
        };
        const testData = {
          sizeMB:  [5.000, 0.200, 0.001, 9.000, 0.002, 0.020, 0.008, 4.000, 0.001, 1.000,
                    0.005, 0.080, 0.800, 0.200, 0.050, 7.000, 0.005, 0.002, 8.000, 0.008],
          timeSec: [0.425, 0.098, 0.052, 0.686, 0.066, 0.078, 0.070, 0.375, 0.058, 0.136,
                    0.052, 0.063, 0.183, 0.087, 0.066, 0.558, 0.066, 0.068, 0.610, 0.057]
        };
        //console.log(testData.timeSec); //Muestra datos ingresados manualmente por consola
        //console.log(testData.sizeMB);
        //console.log(trainData.sizeMB);
        //console.log(trainData.timeSec);

        // Convirtiendo datos a tensores:
        const trainTensors = {
          sizeMB: tf.tensor2d(trainData.sizeMB, [20, 1]),
          timeSec: tf.tensor2d(trainData.timeSec, [20, 1])
        };
        const testTensors = {
          sizeMB: tf.tensor2d(testData.sizeMB, [20, 1]),
          timeSec: tf.tensor2d(testData.timeSec, [20, 1])
        }
        const model = tf.sequential();
        model.add(tf.layers.dense({inputShape: [1] , units: 1}));
        model.compile({optimizer: 'sgd', loss: 'meanAbsoluteError'});
        model.summary();

        (async function() {
          await model.fit(trainTensors.sizeMB,
                          trainTensors.timeSec,
                          {epochs: 500});
                          })();
        //Evalua el modelo, utilizando la funcion de perdida,
        //de esta forma, mientras mas cercana a 0, mejor
        model.evaluate(testTensors.sizeMB, testTensors.timeSec).print();

        const smallFileMB = 1;
        const bigFileMB = 100;
        const hugeFileMB = 10000;
        model.predict(tf.tensor2d([[smallFileMB],[bigFileMB],[hugeFileMB]])).print();
      </code></pre>
  </section>

  <section id="live" class="live hidden">
        <div id="editor" class="editor"></div>

        <div class="output-container">
            <div class="buttons-container">
                <button id="execute" class="button run" type="button">Run &rsaquo;</button>
                <button id="reset" type="button" class="button">Reset</button>
            </div>
            <div id="console" class="output">
                <code></code>
            </div>
        </div>
  </section>



  <script src="../../code-editor/codemirror-5-50-2.js"></script>
  <script src="../../code-editor/editor-js.js"></script>
  </body>
</html>
